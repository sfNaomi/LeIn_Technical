function runAction(e){e.data.message="";let _=new Map,a=new Map,d=new Map;return e.data.related.OrderItem.forEach(t=>{_.set(t.Product2Id,t.Quantity)}),e.data.related.aforza__Relationship_Rule__c.forEach(t=>{if(t.aforza__Type__c==="Addition")if(a.has(t.aforza__Target_Product__c))a.get(t.aforza__Target_Product__c).push(t);else{let r=new Array;r.push(t),a.set(t.aforza__Target_Product__c,r)}}),e.data.related.Product2.forEach(t=>{d.set(t.Id,t)}),e.data.related.OrderItem.forEach(t=>{let r=0,u=!1;a.has(t.Product2Id)&&(a.get(t.Product2Id).forEach(c=>{_.has(c.aforza__Source_Product__c)&&(r+=_.get(c.aforza__Source_Product__c)*c.aforza__Quantity__c,u=!0)}),d.get(t.Product2Id).Family==="Deposit"&&(t.Quantity=r))}),e.data.message+="Your Deposit Return Scheme has been validated",e.data.updateDeviceData=!0,e.data.updateDeviceData.Order=!0,e.data.updateDeviceData.OrderIem=!0,e.data.reprice=!0,e}
