"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
var fs_extra_1 = __importDefault(require("fs-extra"));
var path_1 = require("path");
function describeMetadata(metadata) {
    var _a, _b;
    var customObject = describeCustomObject();
    if ((_a = customObject.childXmlNames) === null || _a === void 0 ? void 0 : _a.includes(metadata)) {
        return describeCustomObjectChild(metadata);
    }
    return (_b = getDescribe()) === null || _b === void 0 ? void 0 : _b.find(function (it) { return it.xmlName === metadata; });
}
exports.describeMetadata = describeMetadata;
function describeCustomObjectChild(metadata) {
    if (!describedCustomObjectChildren) {
        var path = path_1.join(__dirname, "..", "resources", "metadata", "47", "custom-object-children-describe.json");
        describedCustomObjectChildren = JSON.parse(fs_extra_1.default.readFileSync(path).toString());
    }
    // tslint:disable-next-line:no-non-null-assertion
    return describedCustomObjectChildren.metadataObjects
        .find(function (it) { return it.xmlName === metadata; });
}
function describeCustomObject() {
    // tslint:disable-next-line:no-non-null-assertion
    return getDescribe().find(function (it) { return it.xmlName === "CustomObject"; });
}
var described;
var describedCustomObjectChildren;
function getDescribe() {
    if (!described) {
        var path = path_1.join(__dirname, "..", "resources", "metadata", "47", "describe.json");
        described = JSON.parse(fs_extra_1.default.readFileSync(path).toString());
    }
    // tslint:disable-next-line:no-non-null-assertion
    return described.metadataObjects;
}
//# sourceMappingURL=describe-metadata.js.map